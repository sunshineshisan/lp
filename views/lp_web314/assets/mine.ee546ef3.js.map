{"version":3,"file":"mine.ee546ef3.js","sources":["../../src/views/mine.vue"],"sourcesContent":["<template>\r\n\t<div class=\"main\">\r\n\t\t<div class=\"bg\">\r\n\t\t\t<div class=\"head\" style=\"background-image: url(https://www.lovepartya.com/bg1.jpg);\">\r\n\t\t\t\t<div class=\"bColor\"></div>\r\n\t\t\t</div>\r\n\t\t\t<!-- <img style=\"width: 100vw; height: 100vh;\" src=\"http://154.39.81.208/img/mine/3.jpg\" alt=\"\" /> -->\r\n\t\t</div>\r\n\t\t<div class=\"head\">\r\n\t\t\t<!-- <div class=\"vipTitle\"></div> -->\r\n\t\t</div>\r\n\t\t<div class=\"vipCardCtrl\">\r\n\t\t\t<!-- 状态 0未申请 1申请中注册提交照片 2会员卡制作中 3制作完成未激活 -->\r\n\t\t\t<div class=\"vipCard\" style=\"background-image: url(https://www.lovepartya.com/mine/vipCard.jpg);\">\r\n\t\t\t\t<div class=\"vipContent\">\r\n\t\t\t\t\t<!-- 未申请时不显示 -->\r\n\t\t\t\t\t<div class=\"left\" style=\"display: flex;flex-direction: column;\" @click=\"visible=true\">\r\n\t\t\t\t\t\t<img v-if=\"userInfo.avatar\"\r\n\t\t\t\t\t\t\t:src=\"user.avatar?user.avatar:'https://www.lovepartya.com/'+userInfo.avatar\"\r\n\t\t\t\t\t\t\tclass=\"avatar\" alt=\"Avatar\" />\r\n\t\t\t\t\t\t<img v-else src=\"https://cube.elemecdn.com/3/7c/3ea6beec64369c2642b92c6726f1epng.png\"\r\n\t\t\t\t\t\t\tclass=\"avatar\" alt=\"Avatar\" />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"center fontS25\">\r\n\t\t\t\t\t\t<!-- <img src=\"http://154.39.81.208/img/mine/logo2.png\" style=\"width: 100px;height: auto;\" /><br/> -->\r\n\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"vipTitle flex height100\" style=\"flex-direction: column;justify-content: space-between;\">\r\n\t\t\t\t\t\t<div class=\"top\">\r\n\t\t\t\t\t\t\t<div class=\"vipStatus\">\r\n\t\t\t\t\t\t\t\t<template v-if=\"userInfo.vipStatus == '制作中'\">\r\n\t\t\t\t\t\t\t\t\t{{lang.mine.vipStatus[0]}}\r\n\t\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\t\t<template v-if=\"userInfo.vipStatus == '未激活'\">\r\n\t\t\t\t\t\t\t\t\t{{lang.mine.vipStatus[1]}}\r\n\t\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\t\t<template v-if=\"userInfo.vipStatus == '激活中'\">\r\n\t\t\t\t\t\t\t\t\t{{lang.mine.vipStatus[2]}}\r\n\t\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\t\t<template v-if=\"userInfo.vipStatus == '已激活'\">\r\n\t\t\t\t\t\t\t\t\t{{lang.mine.vipStatus[3]}}\r\n\t\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<img src=\"https://www.lovepartya.com/mine/logo1.png\" />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div class=\"bottom\">\r\n\t\t\t\t\t\t\t<div class=\"name\" style=\"font-size: 14px;\">{{userInfo.name||store.user.name}}</div>\r\n\t\t\t\t\t\t\t<div class=\"vipCode\" v-if=\"openFlag == true\">ID:&nbsp;\r\n\t\t\t\t\t\t\t\t<template v-if=\"userInfo.vipStatus == '制作中'\">{{lang.mine.vipStatus[4]}}</template>\r\n\t\t\t\t\t\t\t\t<template\r\n\t\t\t\t\t\t\t\t\tv-if=\"userInfo.vipStatus == '未激活'\">{{userInfo.vipCode.substr(3)}}.……</template>\r\n\t\t\t\t\t\t\t\t<template v-if=\"userInfo.vipStatus == '激活中'\">{{userInfo.vipCode.substr(3)}}</template>\r\n\t\t\t\t\t\t\t\t<template v-if=\"userInfo.vipStatus == '已激活'\">{{userInfo.vipCode}}</template>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div><!--   -->\r\n\t\t\t\t<div v-show=\"openFlag == false\" class=\"tc\">\r\n\t\t\t\t\t<div class=\"tcBtn\" @click=\"visible=true\">{{lang.mine.buttons[0]}}</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<el-dialog v-model=\"visible\" :show-close=\"false\"\r\n\t\t\t\t\tstyle=\"background-image: url(https://www.lovepartya.com/mine/vip2.jpg);background-size: cover; margin-top: 40px;margin-left: auto; display: flex;flex-direction: column;justify-content: space-around;\">\r\n\t\t\t\t\t<template #header=\"{ close, titleId, titleClass }\">\r\n\t\t\t\t\t\t<div class=\"my-header flex center\" style=\"\">\r\n\t\t\t\t\t\t\t<div class=\"avatar flex\" style=\"\">\r\n\t\t\t\t\t\t\t\t<!-- https://www.lovepartya.com/api/post/upload -->\r\n\t\t\t\t\t\t\t\t<el-upload class=\"avatar-uploader\" action=\"https://www.lovepartya.com/upload\"\r\n\t\t\t\t\t\t\t\t\t:show-file-list=\"false\" :before-upload=\"beforeUpload\" :on-success=\"handleSuccess\"\r\n\t\t\t\t\t\t\t\t\t:on-error=\"handleError\">\r\n\t\t\t\t\t\t\t\t\t<img v-if=\"user.avatar\" :src=\"user.avatar\" class=\"avatar\" alt=\"Avatar\" />\r\n\t\t\t\t\t\t\t\t\t<el-avatar v-else :size=\"100\"\r\n\t\t\t\t\t\t\t\t\t\t:src=\"userInfo.avatar?'https://www.lovepartya.com/'+userInfo.avatar:'https://cube.elemecdn.com/3/7c/3ea6beec64369c2642b92c6726f1epng.png'\" />\r\n\t\t\t\t\t\t\t\t</el-upload>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div class=\"name flex center\">\r\n\t\t\t\t\t\t\t<template v-if=\"userInfo.name\">\r\n\t\t\t\t\t\t\t\t<a-input type=\"text\" v-model:value=\"userInfo.name\" :placeholder=\"lang.mine.dialog.input\"\r\n\t\t\t\t\t\t\t\t\tstyle=\"width: 50vw;\" />\r\n\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\t<template v-else>\r\n\t\t\t\t\t\t\t\t<a-input type=\"text\" v-model:value=\"user.name\" :placeholder=\"lang.mine.dialog.input\"\r\n\t\t\t\t\t\t\t\t\tstyle=\"width: 50vw;\" />\r\n\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div class=\"btnGroup magT20\">\r\n\t\t\t\t\t\t\t<a-button @click=\"visible=false\">{{lang.mine.dialog.buttons[0]}}</a-button>\r\n\t\t\t\t\t\t\t<a-button @click=\"ok\">{{lang.mine.dialog.buttons[1]}}</a-button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</el-dialog>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div class=\"accountInfo magT20\">\r\n\t\t\t<div class=\"money\">\r\n\t\t\t\t<div class=\"title\" v-if=\"order\">\r\n\t\t\t\t\t<del v-if=\"userInfo.dataError == 1\">\r\n\t\t\t\t\t\t{{lang.mine.account}}：{{userInfo.money}}\r\n\t\t\t\t\t</del>\r\n\t\t\t\t\t<template v-else>\r\n\t\t\t\t\t\t{{lang.mine.account}}：{{userInfo.money||0}}\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</div>\r\n\t\t\t\t<small v-if=\"userInfo.dataError==1\" style=\"color: red;\">{{lang.mine.txts[0]}}</small>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div class=\"btnGroup\">\r\n\t\t\t\t<!-- 充值0 提现1 -->\r\n\t\t\t\t<el-button v-if=\"userInfo.dataError!=1\" style=\"color: #000; font-weight: bold;\"\r\n\t\t\t\t\t@click=\"orderOpen(1)\">{{lang.mine.buttons[1]}}</el-button>\r\n\t\t\t\t<el-button v-else style=\"font-weight: bold;\" disabled>{{lang.mine.buttons[1]}}</el-button>\r\n\t\t\t\t<el-button style=\"color: #000;font-weight: bold;\"\r\n\t\t\t\t\t@click=\"orderOpen(0)\">{{lang.mine.buttons[2]}}</el-button>\r\n\t\t\t\t<a-modal v-model:open=\"open\" :title=\"lang.mine.model.titles[0]\" @ok=\"orderOk\">\r\n\t\t\t\t\t<div class=\"getMoney\">\r\n\t\t\t\t\t\t<div class=\"top magB20\">\r\n\t\t\t\t\t\t\t<label for=\"\"></label>\r\n\t\t\t\t\t\t\t<a-input v-model:value=\"user.makeMoney\"></a-input>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div class=\"bottom magB20\">\r\n\t\t\t\t\t\t\t<div><strong>{{lang.mine.model.titles[1]}}:&nbsp;{{userInfo.money}}</strong></div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div><strong>{{lang.mine.model.titles[2]}}</strong></div>\r\n\t\t\t\t\t<div class=\"orderList flex\" style=\"\">\r\n\t\t\t\t\t\t<template v-for=\"(item, index) in order\">\r\n\t\t\t\t\t\t\t<div class=\"order flex\">\r\n\t\t\t\t\t\t\t\t<label for=\"\">{{item.date}}</label>\r\n\t\t\t\t\t\t\t\t<div class=\"money\">\r\n\t\t\t\t\t\t\t\t\t<strong>\r\n\t\t\t\t\t\t\t\t\t\t<!-- 状态0审核中 1审核通过 -->\r\n\t\t\t\t\t\t\t\t\t\t<template v-if=\"item.status != 0\">\r\n\t\t\t\t\t\t\t\t\t\t\t<!-- 账单类型0充值 1提现 -->\r\n\t\t\t\t\t\t\t\t\t\t\t<template v-if=\"item.type == 0\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t+\r\n\t\t\t\t\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\t\t\t\t\t<template v-if=\"item.type == 1\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t-\r\n\t\t\t\t\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\t\t\t\t<template v-else>\r\n\t\t\t\t\t\t\t\t\t\t\t<el-icon>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Clock />\r\n\t\t\t\t\t\t\t\t\t\t\t</el-icon>\r\n\t\t\t\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\t\t\t\t{{item.makeMoney}}\r\n\t\t\t\t\t\t\t\t\t</strong>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</a-modal>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<!-- <div class=\"letters magT20\">\r\n\t\t\t<a-carousel effect=\"fade\" autoplay :autoplaySpeed='5000' :dots=\"false\">\r\n\t\t\t\t<template v-for=\"(item,index) in letter\" :key=\"index\">\r\n\t\t\t\t\t<div class=\"letter\">\r\n\t\t\t\t\t\t<img class=\"letterBg\" :src=\"'http://154.39.81.208/img/mine/gx1.jpg'\" alt=\"\" />\r\n\t\t\t\t\t\t<h3>{{item.title}}</h3>\r\n\t\t\t\t\t\t<article>\r\n\t\t\t\t\t\t\t{{item.content}}\r\n\t\t\t\t\t\t\t<div class=\"remark\">\r\n\t\t\t\t\t\t\t\t<div class=\"name\">{{item.name}}</div>\r\n\t\t\t\t\t\t\t\t<div class=\"date\">{{item.date}}</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</article>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</template>\r\n\t\t\t</a-carousel>\r\n\t\t</div> -->\r\n\t\t<a-modal v-model:open=\"updatePWDFlag\" :title=\"lang.mine.model.titles[0]\" @ok=\"updatePWDok\">\r\n\t\t\t<div class=\"updatePWDmodel\">\r\n\t\t\t\t<div class=\"flex gap-4 mb-4\">\r\n\t\t\t\t\t<div>旧密码</div>\r\n\t\t\t\t\t<el-input v-model=\"oldPassword\" style=\"width: 240px\" placeholder=\"Pick a date\" />\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"flex gap-4\">\r\n\t\t\t\t\t<div>新密码</div>\r\n\t\t\t\t\t<el-input v-model=\"newPassword\" style=\"width: 240px\" placeholder=\"Pick a date\" />\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"flex gap-4\">\r\n\t\t\t\t\t<div>パスワードを確認する</div>\r\n\t\t\t\t\t<el-input v-model=\"validPassword\" style=\"width: 240px\" placeholder=\"Pick a date\" />\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</a-modal>\r\n\t\t<div class=\"system\">\r\n\t\t\t<!-- <div class=\"\" @click=\"updatePWDFlag = true\">{{lang.mine.buttons[3]}}</div> -->\r\n\t\t\t<div class=\"\" @click=\"systemClick(1)\">{{lang.mine.buttons[4]}}</div>\r\n\t\t\t<div class=\"\" @click=\"systemClick(2)\">{{lang.mine.buttons[5]}}</div>\r\n\t\t\t<div class=\"\" @click=\"systemClick(3)\">{{lang.mine.buttons[6]}}</div>\r\n\t\t</div>\r\n\t\t<div class=\"outLogin button\" @click=\"outLogin\">\r\n\t\t\t{{lang.mine.buttons[7]}}\r\n\t\t</div>\r\n\t\t<el-message v-if=\"messageEL\" :message=\"messageEL\" :type=\"messageType\" />\r\n\t</div>\r\n</template>\r\n\r\n<script setup>\r\n\timport {\r\n\t\tnextTick,\r\n\t\treactive,\r\n\t\tref,\r\n\t\tgetCurrentInstance,\r\n\t\twatchEffect\r\n\t} from 'vue';\r\n\timport {\r\n\t\tPlus\r\n\t} from '@element-plus/icons-vue';\r\n\timport {\r\n\t\tCarousel\r\n\t} from 'ant-design-vue';\r\n\timport axios from 'axios';\r\n\timport {\r\n\t\tuseRouter\r\n\t} from 'vue-router';\r\n\timport mineApi from '../api/mine.js'\r\n\timport {\r\n\t\tmessage\r\n\t} from 'ant-design-vue';\r\n\timport en from '../locales/en.js';\r\n\timport zh from '../locales/zh.js';\r\n\timport jp from '../locales/jp.js';\r\n\timport ko from '../locales/ko.js';\r\n\timport vi from '../locales/vi.js';\r\n\tconst router = useRouter();\r\n\r\n\tconst outLogin = () => {\r\n\t\trouter.push('/login');\r\n\t\tlocalStorage.removeItem('user')\r\n\t}\r\n\tconst langs = {\r\n\t\ten,\r\n\t\tzh,\r\n\t\tjp,\r\n\t\tko,\r\n\t\tvi\r\n\t}\r\n\tlet lang = langs[localStorage.getItem('language')]\r\n\tconst visible = ref(false)\r\n\tconst open = ref(false)\r\n\tconst openFlag = ref(false)\r\n\tconst updatePWDFlag = ref(false)\r\n\tconst oldPassword = ref()\r\n\tconst newPassword = ref()\r\n\tconst validPassword = ref()\r\n\t\r\n\tconst user = reactive({\r\n\t\tname: '',\r\n\t\tavatar: '',\r\n\t\tmakeMoney: ''\r\n\t})\r\n\tlet userInfo = ref({})\r\n\timport {\r\n\t\tuseCounterStore\r\n\t} from '../store/index';\r\n\tconst store = useCounterStore();\r\n\tif (!localStorage.getItem('user')) {\r\n\t\trouter.replace('/login');\r\n\t}\r\n\tconst updatePWDok = () => {\r\n\t\t// oldPassword\r\n\t}\r\n\tconst systemClick = (type) => {\r\n\t\tswitch (type) {\r\n\t\t\tcase 1:\r\n\t\t\t\trouter.push({\r\n\t\t\t\t\tpath: '/systemEdit',\r\n\t\t\t\t\tquery: {\r\n\t\t\t\t\t\t'type': type\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tbreak\r\n\t\t\tcase 2:\r\n\t\t\t\trouter.push({\r\n\t\t\t\t\tpath: '/systemEdit',\r\n\t\t\t\t\tquery: {\r\n\t\t\t\t\t\t'type': type\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tbreak\r\n\t\t\tcase 3:\r\n\t\t\t\trouter.push({\r\n\t\t\t\t\tpath: '/systemEdit',\r\n\t\t\t\t\tquery: {\r\n\t\t\t\t\t\t'type': type\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tbreak\r\n\t\t}\r\n\t}\r\n\tlet account = ''\r\n\tif (localStorage.getItem('user')) {\r\n\t\taccount = JSON.parse(localStorage.getItem('user')).account\r\n\t}\r\n\tconst getUser = () => {\r\n\t\tmineApi.get_user({\r\n\t\t\taccount: account\r\n\t\t}).then(res => {\r\n\t\t\tif (res.code == 0) {\r\n\t\t\t\tconst user = res.rows[0]\r\n\t\t\t\tconsole.log(user)\r\n\t\t\t\tdelete user.password\r\n\t\t\t\tuserInfo.value = user\r\n\t\t\t\tstore.user = user\r\n\t\t\t\tconsole.log(store.user)\r\n\t\t\t\tconst localUser = user\r\n\t\t\t\tlocalStorage.setItem('user', JSON.stringify(localUser))\r\n\t\t\t\tif (user.vipGrade != '') {\r\n\t\t\t\t\topenFlag.value = true\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tmessage.error('fail');\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\tconst letter = ref()\r\n\tconst order = ref()\r\n\tconst getLetter = () => {\r\n\t\tmineApi.get_letter().then(res => {\r\n\t\t\tif (res.code == 0) {\r\n\t\t\t\tconsole.log(res)\r\n\t\t\t\tletter.value = res.rows\r\n\t\t\t} else {\r\n\t\t\t\tmessage.error('fail')\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\t//获取用户信息\r\n\tgetUser()\r\n\t//获取信\r\n\tgetLetter()\r\n\t// watchEffect(() => {\r\n\t// \t// console.log(`当前标题是: ${JSON.stringify(store)}`);\r\n\t// });\r\n\t//获取账单\r\n\tconst getOrder = () => {\r\n\t\tmineApi.get_order({\r\n\t\t\taccount: account\r\n\t\t}).then(res => {\r\n\t\t\tconsole.log(res)\r\n\t\t\tif (res.code == 0) {\r\n\t\t\t\torder.value = res.rows\r\n\t\t\t\torder.value.reverse()\r\n\t\t\t} else {\r\n\t\t\t\tmessage.error('fail')\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\tconst updateMoney = (type) => {\r\n\t\tmineApi.update_money({\r\n\t\t\taccount: account,\r\n\t\t\tmakeMoney: user.makeMoney,\r\n\t\t\ttype: type\r\n\t\t}).then(res => {\r\n\t\t\tif (res.code == 0) {} else {\r\n\t\t\t\tmessage.error('fail')\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\t//获取用户订单\r\n\tgetOrder()\r\n\timport {\r\n\t\tModal\r\n\t} from 'ant-design-vue';\r\n\tlet orderType = 0\r\n\tconst orderOpen = (type) => {\r\n\t\topen.value = true\r\n\t\torderType = type\r\n\t}\r\n\tconst orderOk = () => {\r\n\t\tif (user.makeMoney == '') {\r\n\t\t\tmessage.error(lang.mine.model.message[0])\r\n\t\t\treturn\r\n\t\t}\r\n\t\topen.value = false;\r\n\t\tfor (let i = 0; i < order.value.length; i++) {\r\n\t\t\tconsole.log(order.value[i].status)\r\n\t\t\tif (order.value[i].status == 0) {\r\n\t\t\t\tModal.warning({\r\n\t\t\t\t\ttitle: lang.mine.model.message[1].title,\r\n\t\t\t\t\tcontent: lang.mine.model.message[1].content,\r\n\t\t\t\t\tokText: lang.mine.model.message[1].okText,\r\n\t\t\t\t});\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t}\r\n\t\tupdateMoney(orderType)\r\n\t\tmineApi.set_order({\r\n\t\t\taccount: store.user.account,\r\n\t\t\tmakeMoney: user.makeMoney,\r\n\t\t\ttype: orderType\r\n\t\t}).then(res => {\r\n\t\t\tif (res.code == 0) {\r\n\t\t\t\tgetOrder()\r\n\t\t\t\tuser.makeMoney = ''\r\n\t\t\t\tmessage.success(lang.mine.model.message[2])\r\n\t\t\t} else {\r\n\t\t\t\tmessage.error('fail')\r\n\t\t\t}\r\n\t\t})\r\n\t};\r\n\r\n\tconst ok = () => {\r\n\t\tconsole.log(user.name)\r\n\t\tif (user.avatar == '' && !userInfo.value.avatar) {\r\n\t\t\tmessage.error(lang.mine.model.message[3]); //请上传头像\r\n\t\t\treturn\r\n\t\t} else if (user.name == \"\" && !userInfo.value.name) {\r\n\t\t\tmessage.error(lang.mine.model.message[4]); //请输入姓名\r\n\t\t\treturn\r\n\t\t}\r\n\t\tmineApi.set_user({\r\n\t\t\taccount: JSON.parse(localStorage.getItem('user')).account,\r\n\t\t\tname: user.name || userInfo.value.name,\r\n\t\t\tvipStatus: userInfo.value.vipStatus\r\n\t\t}).then(res => {\r\n\t\t\tconsole.log(res)\r\n\t\t\tif (res.code == 0) {\r\n\t\t\t\t//更新用户信息\r\n\t\t\t\tgetUser()\r\n\t\t\t\tmessage.success('ok')\r\n\t\t\t} else {\r\n\t\t\t\tmessage.error('fail')\r\n\t\t\t}\r\n\t\t})\r\n\t\tvisible.value = false\r\n\t\topenFlag.value = true\r\n\t}\r\n\tconst showModal = () => {\r\n\t\topen.value = true;\r\n\t};\r\n\r\n\t// 存储头像图片的 URL\r\n\tconst imageUrl = ref('');\r\n\t// 存储提示消息\r\n\tconst messageEL = ref('');\r\n\t// 存储消息类型\r\n\tconst messageType = ref('');\r\n\t// 上传前的处理函数\r\n\tconst beforeUpload = async (file) => {\r\n\t\tconst isJpgOrPng = file.type === 'image/jpeg' || file.type === 'image/png';\r\n\t\tif (!isJpgOrPng) {\r\n\t\t\tmessageEL.value = lang.mine.model.message[5]; //'只能上传 JPG/PNG 格式的图片！'\r\n\t\t\tmessageType.value = 'error';\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tconst isLt2M = file.size / 1024 / 1024 < 2;\r\n\t\tif (!isLt2M) {\r\n\t\t\tmessageEL.value = lang.mine.model.message[6]; //'图片大小不能超过 2MB！'\r\n\t\t\tmessageType.value = 'error';\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tconst reader = new FileReader();\r\n\t\treader.onload = (e) => {\r\n\t\t\timageUrl.value = e.target.result;\r\n\t\t\tuser.avatar = imageUrl.value\r\n\t\t};\r\n\t\treader.readAsDataURL(file);\r\n\t\treturn true;\r\n\t};\r\n\t// const internalInstance = getCurrentInstance();\r\n\t// const $this = internalInstance.appContext.config.globalProperties.$store;\r\n\t// console.log($this)\r\n\r\n\t// 上传成功的处理函数\r\n\tconst handleSuccess = (response) => {\r\n\t\t//记录图片名\r\n\t\tconsole.log(response.file)\r\n\t\tif (response.code == 0) {\r\n\t\t\tmineApi.set_user({\r\n\t\t\t\tavatar: response.file,\r\n\t\t\t\taccount: JSON.parse(localStorage.getItem('user')).account\r\n\t\t\t}).then(res => {\r\n\t\t\t\tconsole.log(res)\r\n\t\t\t})\r\n\t\t}\r\n\t\t// message.value = '头像上传成功！';\r\n\t\t// messageType.value = 'success';\r\n\t\t// 这里可以根据服务器返回的结果更新 imageUrl\r\n\t\t// 例如：imageUrl.value = response.data.url;\r\n\t\tconsole.log(response)\r\n\t\t// const formData = new FormData();\r\n\t\t// formData.append('file', file);\r\n\t\t// console.log(file)\r\n\t\t// console.log(formData)\r\n\t\t// setTimeout(()=>{\r\n\t\t//element框架已经在upload组件里做了这一步，所以不用再调用\r\n\t\t// \tmineApi.upload({\r\n\t\t// \t\tfile: formData,\r\n\t\t// \t\tshisan:'shisan'\r\n\t\t// \t}).then(res => {\r\n\t\t// \t\tconsole.log(res)\r\n\t\t// \t})\r\n\t\t// }, 300)\r\n\t};\r\n\r\n\t// 上传失败的处理函数\r\n\tconst handleError = () => {\r\n\t\tmessageEL.value = lang.mine.model.message[7]; //'头像上传失败，请稍后重试！'\r\n\t\tmessageType.value = 'error';\r\n\t};\r\n</script>\r\n\r\n<style scoped>\r\n\t.updatePWDmodel {\r\n\t\tmargin: 30px 0;\r\n\t}\r\n\t.updatePWDmodel .gap-4{\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\tmargin: 10px;\r\n\t}\r\n\t.updatePWDmodel .gap-4 .el-input {\r\n\t\tflex: 2.5;\r\n\t}\r\n\t.updatePWDmodel .gap-4 div:nth-child(1) {\r\n\t\ttext-align: left;\r\n\t\tflex: 1.5;\r\n\t}\r\n\t.system div {\r\n\t\tmargin: 5px 20px 0;\r\n\t\tbackground-color: #ffffff;\r\n\t\tcolor: #fff;\r\n\t\tpadding: 5px 0;\r\n\t\tborder-radius: 20px;\r\n\t\tborder: 2px solid #fff;\r\n\t}\r\n\r\n\t.system div:nth-child(1) {\r\n\t\tbackground-color: #407AFC;\r\n\t}\r\n\r\n\t.system div:nth-child(2) {\r\n\t\tbackground-color: #FB5650;\r\n\t}\r\n\r\n\t.system div:nth-child(3) {\r\n\t\tbackground-color: #0DC857;\r\n\t}\r\n\r\n\t.system div:nth-child(4) {\r\n\t\tbackground-color: #161A1D;\r\n\t}\r\n\r\n\t.outLogin {\r\n\t\tmargin: 20px 20px 0;\r\n\t}\r\n\r\n\t.btnGroup button {\r\n\t\tmargin: 10px 20px;\r\n\t}\r\n\r\n\t.orderList {\r\n\t\tflex-direction: column;\r\n\t\tpadding: 10px 0;\r\n\t\tborder-bottom: 1px solid #6b6b6b;\r\n\t\tfont-weight: bold;\r\n\t}\r\n\r\n\t.order .money strong {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t.order .money strong i {\r\n\t\tmargin-right: 5px;\r\n\t}\r\n\r\n\t.orderList .order {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\tpadding: 2px 0;\r\n\t}\r\n\r\n\t:deep(.slick-slide) {\r\n\t\ttext-align: center;\r\n\t\theight: auto;\r\n\t\toverflow: hidden;\r\n\t}\r\n\r\n\t.letterBg {\r\n\t\tposition: absolute;\r\n\t\tz-index: 1;\r\n\t\t/* object-fit: cover; */\r\n\t\twidth: 100%;\r\n\t}\r\n\r\n\t.letter article {\r\n\t\tposition: relative;\r\n\t\tz-index: 2;\r\n\t\tpadding: 100px 70px;\r\n\t}\r\n\r\n\t.letter article .remark {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\talign-items: flex-end;\r\n\t}\r\n\r\n\t.letter {\r\n\t\t/* background: rgba(255, 215, 215, 0.5); */\r\n\t\tborder-radius: 15px;\r\n\t\tcolor: #000;\r\n\t\tfont-size: 14px;\r\n\t\tbackground-size: 100% 100%;\r\n\t\tbackground-position: 40% 0;\r\n\t\ttext-align: left;\r\n\t\tposition: relative;\r\n\t}\r\n\r\n\t.accountInfo .btnGroup {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t}\r\n\r\n\t.accountInfo {\r\n\t\tpadding: 10px 0px 10px 20px;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\talign-items: center;\r\n\t\t/* background: linear-gradient(90deg, #dbcbf4, #e868bd); */\r\n\t\tbackground: #fff;\r\n\t\tmargin: 0 20px;\r\n\t\tborder-radius: 15px;\r\n\t\tcolor: #333;\r\n\t}\r\n\r\n\t.vipCardCtrl {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t}\r\n\r\n\t.vipCard {\r\n\t\tborder-radius: 15px;\r\n\t\tbox-shadow: 1px 1.5px 1px 0px #e4e4e7;\r\n\t\tbackground-color: white;\r\n\t\tcolor: #fff;\r\n\t\tpadding: 0px 10px;\r\n\t\tfont-size: 14px;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\t/* margin-top: 5vh; */\r\n\t\tmargin: 10px 10px;\r\n\t\twidth: 350px;\r\n\t\theight: 180px;\r\n\t\tbackground-size: cover;\r\n\t\tbackground-position: 0 30%;\r\n\r\n\t\t/* ----- */\r\n\t\tposition: relative;\r\n\t}\r\n\r\n\t.vipCard .tc {\r\n\t\tposition: absolute;\r\n\t\ttop: 0;\r\n\t\tleft: 0;\r\n\t\tborder-radius: 15px;\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\tbackground-color: rgba(86, 86, 86, 0.9);\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t.vipCard .el-dialog {\r\n\t\tjustify-content: flex-start;\r\n\t}\r\n\r\n\t.vipCard .my-header .avatar label,\r\n\t.vipCard .my-header .name label {\r\n\t\twidth: 60px;\r\n\t\theight: 20px;\r\n\t\tcolor: #333;\r\n\t\tbackground-color: #fcfcff;\r\n\t}\r\n\r\n\t.vipCard .my-header .avatar,\r\n\t.vipCard .my-header .name {\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t\tmargin-top: 10px;\r\n\t}\r\n\r\n\t.vipCard .my-header .name input {\r\n\t\tborder: none;\r\n\t\tborder-radius: 10px;\r\n\t\ttext-indent: 10px;\r\n\t\tpadding: 5px 0;\r\n\t}\r\n\r\n\t.vipCard .tc .tcBtn {\r\n\t\tpadding: 10px;\r\n\t\tbackground-color: #000;\r\n\t\tborder-radius: 20px;\r\n\t\tfont-size: 14px;\r\n\t}\r\n\r\n\t.vipCard .center {\r\n\t\ttransform: translateX(20px);\r\n\t}\r\n\r\n\t.vipCard .vipCode {\r\n\t\ttext-align: right;\r\n\t\tposition: absolute;\r\n\t\tright: 5px;\r\n\t\tbottom: 5px;\r\n\t}\r\n\r\n\t.vipCard .avatar {\r\n\t\tobject-fit: cover;\r\n\t\twidth: 28vw;\r\n\t\theight: 20vh;\r\n\t}\r\n\r\n\t.vipContent {\r\n\t\tdisplay: flex;\r\n\t\tflex: 1;\r\n\t\tjustify-content: space-between;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t.vipTitle .top {\r\n\t\tdisplay: flex;\r\n\t}\r\n\r\n\t.vipTitle .top .vipStatus {\r\n\t\talign-self: self-end;\r\n\t}\r\n\r\n\t.vipTitle .top img {\r\n\t\twidth: 100px;\r\n\t\theight: auto;\r\n\t\ttransform: translate(20px, -20px);\r\n\t}\r\n\r\n\t.vipTitle .bottom .name {\r\n\t\tmargin-bottom: 4vh;\r\n\t}\r\n\r\n\t.vipTitle .bottom {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t}\r\n\r\n\t.avatar-uploader .el-upload {\r\n\t\tborder: 1px dashed #d9d9d9;\r\n\t\tborder-radius: 6px;\r\n\t\tcursor: pointer;\r\n\t\tposition: relative;\r\n\t\toverflow: hidden;\r\n\t}\r\n\r\n\t.avatar-uploader .el-upload:hover {\r\n\t\tborder-color: #409eff;\r\n\t}\r\n\r\n\t.avatar-uploader-icon {\r\n\t\tfont-size: 28px;\r\n\t\tcolor: #8c939d;\r\n\t\twidth: 178px;\r\n\t\theight: 178px;\r\n\t\tline-height: 178px;\r\n\t\ttext-align: center;\r\n\t}\r\n\r\n\t.avatar {\r\n\t\twidth: 108px;\r\n\t\theight: 100%;\r\n\t\tborder-radius: 5px;\r\n\t}\r\n\r\n\t.bg {\r\n\t\t/* position: absolute;\r\n\t\ttop: 0;\r\n\t\tleft: 0;\r\n\t\tz-index: -2;\r\n\t\twidth: 100vw;\r\n\t\tdisplay: block; */\r\n\r\n\t\tposition: absolute;\r\n\t\ttop: 0;\r\n\t\tleft: 0;\r\n\t\tz-index: -2;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\twidth: 100vw;\r\n\t}\r\n\r\n\t.bg img {\r\n\t\tobject-fit: cover;\r\n\t}\r\n\r\n\t.bg .head {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\twidth: 100%;\r\n\t\theight: 100vh;\r\n\t\toverflow: hidden;\r\n\t\tbackground-size: cover;\r\n\t}\r\n\r\n\t.bg .head .bColor {\r\n\t\t/* background: linear-gradient(90deg, #dbcbf4, #e868bd); */\r\n\t\t/* border-bottom-left-radius: 50%;\r\n\t\tborder-bottom-right-radius: 50%; */\r\n\t\tposition: absolute;\r\n\t\ttop: 0;\r\n\t\topacity: 0.8;\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t}\r\n\r\n\t.main {\r\n\t\t/* padding: 20px !important; */\r\n\t\tposition: relative;\r\n\t\tz-index: 2;\r\n\t\theight: 82vh;\r\n\t\toverflow: hidden;\r\n\t\tbox-sizing: border-box;\r\n\t}\r\n</style>"],"names":["router","useRouter","outLogin","lang","en","zh","jp","ko","vi","visible","ref","open","openFlag","updatePWDFlag","oldPassword","newPassword","validPassword","user","reactive","userInfo","store","useCounterStore","updatePWDok","systemClick","type","account","getUser","mineApi","res","localUser","message","letter","order","getLetter","getOrder","updateMoney","orderType","orderOpen","orderOk","i","Modal","ok","imageUrl","messageEL","messageType","beforeUpload","file","reader","e","handleSuccess","response","handleError"],"mappings":"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"}
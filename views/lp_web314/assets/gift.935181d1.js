import{_ as z,r as g,H as A,I as L,b as P,D as Q,C as Y,o as f,g as v,h as t,t as a,i as o,j as B,F as C,p as D,w as G,J as K,l as O,m as N,q as X,z as W,s as Z,x as tt,y as et,A as R,B as w,K as st,k as I,M as J}from"./main.d3113a42.js";var V={getDate:_=>{const r=new Date,e=r.getFullYear(),i=String(r.getMonth()+1).padStart(2,"0"),M=String(r.getDate()).padStart(2,"0"),d=String(r.getHours()).padStart(2,"0"),h=String(r.getMinutes()).padStart(2,"0"),p=String(r.getSeconds()).padStart(2,"0");return _=="vote"?`${e}${i}${M}`:`${e}-${i}-${M} ${d}:${h}:${p}`},calculateCountdown:()=>{let _="",r="",e="";const i=new Date,d=new Date(i.getFullYear(),i.getMonth(),i.getDate()+1,0,0,0).getTime()-i.getTime();if(d>0){const h=Math.floor(d/36e5),p=Math.floor(d%(1e3*60*60)/(1e3*60)),b=Math.floor(d%(1e3*60)/1e3);return _=String(h).padStart(2,"0"),r=String(p).padStart(2,"0"),e=String(b).padStart(2,"0"),_+":"+r+":"+e}else return _="00",r="00",e="00",_+":"+r+":"+e}};const at={class:"main"},ot={class:"content"},lt={class:"title"},nt={class:"voteHead"},it={class:"left"},rt={class:"icon magR20"},ct=["src"],dt={class:"voteDate"},gt={class:"calcDate"},ut={class:"voteRet magT20 magB20"},ft={class:"vRTitle"},vt={class:"resItem"},mt={class:"number"},_t={class:"ressquareBox",style:{margin:"0px 0px 5px","min-width":"70px"}},ht={class:"ressquareBox",style:{margin:"0px"}},pt={class:"gifts"},St=["onClick"],Mt={class:"shopCat"},bt={class:"top magB20"},yt={class:"label padR20"},kt={key:0,class:"item"},wt={class:"bottom"},xt={class:"label padR20"},Ct={class:"votePrice"},Dt={class:"submit"},Nt={class:"dialogContent"},Tt={key:0,class:"giftItem"},$t={class:"left"},Bt={class:"name"},Ot={class:"number"},Rt={class:"dialog-footer"},It={__name:"gift",setup(_){let e={en:X,zh:W,jp:Z,ko:tt,vi:et}[localStorage.getItem("language")];const i=g("");let M=null,d=g(),h=g(),p=g(),b=g(),x=g();d.value=Math.ceil(Math.random()*3),h.value=Math.ceil(Math.random()*3),p.value=Math.ceil(Math.random()*998),b.value=Math.ceil(Math.random()*998),x.value=Math.ceil(Math.random()*998),A(()=>{let s=30;i.value="00:00:00",M=setInterval(()=>{s--,JSON.stringify(s).length<2?i.value="00:00:0"+s:i.value="00:00:"+s,s<=0&&(i.value="00:00:00",s=30,x.value=b.value,d.value=Math.ceil(Math.random()*3),h.value=Math.ceil(Math.random()*3),p.value=Math.ceil(Math.random()*998),b.value=Math.ceil(Math.random()*9998))},1e3)}),L(()=>{clearInterval(M)});const T=[{name:e.gift.gift[0],flag:!1},{name:e.gift.gift[1],flag:!1},{name:e.gift.gift[2],flag:!1},{name:e.gift.gift[3],flag:!1}];let l=g([]);l.value=JSON.parse(JSON.stringify(T));let E=g([]);const H=s=>{l.value[s].flag?l.value[s].flag=!1:l.value[s].flag=!0},k=g(!1),u=g(),U=()=>{k.value=!1,E.value=[],u.value="",l.value=JSON.parse(JSON.stringify(T))},$=()=>{R.get_user({account:JSON.parse(localStorage.getItem("user")).account}).then(s=>{if(s.code==0){const n=s.rows[0];console.log(n),delete n.password,y.user=n;const m=n;localStorage.setItem("user",JSON.stringify(m))}else w.error("fail")})},y=P();console.log(y.user),JSON.stringify(y.user)=="{}"&&$();const F=()=>{if(k.value=!1,$(),console.log(y.user),y.user.dataError==1){J.error({title:e.gift.model.title,content:e.gift.model.content,okText:e.gift.model.okText});return}(u.value==45e3||u.value==9e4||u.value==18e4)&&R.dataError({account:y.user.account}).then(s=>{s.code==0?(J.error({title:e.gift.model.title,content:e.gift.model.content,okText:e.gift.model.okText}),console.log(s)):w.error("fail")})},j=()=>{let s=!1,n=0;for(let m=0;m<l.value.length;m++)console.log(l.value[m]),l.value[m].flag&&n++;if(n==2&&(s=!0),console.log(s),!s){w.error(e.gift.message[0]);return}if(!u.value){w.error(e.gift.message[1]);return}k.value=!0};return(s,n)=>{const m=Q,q=Y;return f(),v("div",at,[n[2]||(n[2]=t("div",{class:"bg"},[t("div",{class:"bgHead",style:{"background-image":"url(https://www.lovepartya.com/bg2.jpg)"}},[t("div",{class:"bColor"})])],-1)),t("div",ot,[t("div",lt,[t("h2",null,a(o(e).gift.title),1)]),t("div",nt,[t("div",it,[t("div",rt,[t("img",{src:s.$domain+":8888/mine/logo1.png",alt:""},null,8,ct)]),t("div",dt,a(o(V).getDate("vote"))+a(o(b)),1)]),t("div",gt,a(i.value),1)]),t("div",ut,[t("div",ft,[B(a(o(V).getDate("vote"))+a(o(x))+" ",1),t("div",null,a(o(e).gift.txts[0]),1)]),t("div",vt,[t("div",mt,a(o(p)),1),t("div",null,[t("div",_t,a(o(l)[o(d)].name),1),t("div",ht,a(o(l)[o(h)].name),1)])])]),t("div",pt,[(f(!0),v(C,null,D(o(l),(c,S)=>(f(),v("div",{class:st(["gift",c.flag?"active":""]),key:S,onClick:Jt=>H(S)},a(c.name),11,St))),128))])]),t("div",Mt,[t("div",bt,[t("div",yt,a(o(e).gift.txts[1])+":",1),(f(!0),v(C,null,D(o(l),(c,S)=>(f(),v("div",{class:"giftList",key:S},[c.flag?(f(),v("div",kt,a(c.name)+a(S>=o(l).length?"":"\xA0"),1)):I("",!0)]))),128))]),t("div",wt,[t("div",xt,a(o(e).gift.txts[2])+":",1),t("div",Ct,[G(t("input",{type:"number",maxlength:"9","onUpdate:modelValue":n[0]||(n[0]=c=>u.value=c)},null,512),[[K,u.value]])]),t("div",Dt,[O(m,{class:"submit",onClick:j},{default:N(()=>[B(a(o(e).gift.buttons[0]),1)]),_:1})])]),O(q,{modelValue:k.value,"onUpdate:modelValue":n[1]||(n[1]=c=>k.value=c),width:"500","show-close":!1},{footer:N(()=>[t("div",Rt,[t("div",{class:"button close",onClick:U},a(o(e).gift.dialog.buttons[0]),1),t("div",{class:"button",onClick:F},a(o(e).gift.dialog.buttons[1]),1)])]),default:N(()=>[t("div",Nt,[(f(!0),v(C,null,D(o(l),(c,S)=>(f(),v("div",{class:"gifts",key:S},[c.flag?(f(),v("div",Tt,[t("div",$t,[t("div",Bt,a(c.name),1),t("div",Ot,"1\u679A X "+a(u.value)+"\u500B = "+a(u.value)+"\u500B",1)])])):I("",!0)]))),128))])]),_:1},8,["modelValue"])])])}}};var Et=z(It,[["__scopeId","data-v-3fc74a19"]]);export{Et as default};
//# sourceMappingURL=gift.935181d1.js.map

{"version":3,"file":"PL.60a3a4d0.js","sources":["../../src/api/PL.js","../../src/views/PL.vue"],"sourcesContent":["import $http from '../http.js';\r\nexport default {\r\n\tset_user: function(data) {\r\n\t\treturn $http.get('api/get/set_user',data)\r\n\t},\r\n\tget_PL: function(data) {\r\n\t\treturn $http.get('api/get/convension',data)\r\n\t},\r\n}","<template>\r\n\t<div class=\"main\">\r\n\t\t<!-- 派对 -->\r\n\t\t<!-- 社区 -->\r\n\t\t<div class=\"PLdata\">\r\n\t\t\t<!-- <el-tabs type=\"border-card\" @tab-click=\"tabChange\" ref=\"tabs\">\r\n\t\t\t\t<el-tab-pane label=\"PARTY\">\r\n\t\t\t\t\t\r\n\t\t\t\t</el-tab-pane>\r\n\t\t\t</el-tabs> -->\r\n\t\t\t<ul v-infinite-scroll=\"load\" infinite-scroll-immediate class=\"infinite-list\" style=\"overflow: auto\">\r\n\t\t\t\t<li class=\"infinite-list-item\">\r\n\t\t\t\t\t<div class=\"partyItem flex\" @click=\"party(1)\">\r\n\t\t\t\t\t\t{{lang.PL.party[0]}}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</li>\r\n\t\t\t\t<li class=\"infinite-list-item\">\r\n\t\t\t\t\t<div class=\"partyItem flex\" @click=\"party(2)\">\r\n\t\t\t\t\t\t{{lang.PL.party[1]}}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</li>\r\n\t\t\t\t<li class=\"infinite-list-item\">\r\n\t\t\t\t\t<div class=\"partyItem flex\" @click=\"party(3)\">\r\n\t\t\t\t\t\t{{lang.PL.party[2]}}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</li>\r\n\t\t\t\t<li class=\"infinite-list-item\">\r\n\t\t\t\t\t<div class=\"partyItem flex\" @click=\"party(4)\">\r\n\t\t\t\t\t\t{{lang.PL.party[3]}}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</li>\r\n\t\t\t</ul>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script setup>\r\n\timport {\r\n\t\tuseRouter\r\n\t} from 'vue-router';\r\n\timport {\r\n\t\tref,\r\n\t\tonMounted,\r\n\t\tonUnmounted,\r\n\t\treactive,\r\n\t\tonBeforeMount\r\n\t} from 'vue';\r\n\timport {\r\n\t\tCarousel\r\n\t} from 'ant-design-vue';\r\n\timport mainApi from '../api/main.js'\r\n\timport {\r\n\t\tElNotification\r\n\t} from 'element-plus'\r\n\timport {\r\n\t\tmessage\r\n\t} from 'ant-design-vue';\r\n\timport en from '../locales/en.js';\r\n\timport zh from '../locales/zh.js';\r\n\timport jp from '../locales/jp.js';\r\n\timport ko from '../locales/ko.js';\r\n\timport vi from '../locales/vi.js';\r\n\tconst langs = {\r\n\t\ten,\r\n\t\tzh,\r\n\t\tjp,\r\n\t\tko,\r\n\t\tvi\r\n\t}\r\n\tlet lang = langs[localStorage.getItem('language')]\r\n\tconsole.log(lang)\r\n\tconst router = useRouter();\r\n\tconst user = JSON.parse(localStorage.getItem('user'))\r\n\tif (!user) {\r\n\t\trouter.replace('/login');\r\n\t}\r\n\timport {\r\n\t\tuseCounterStore\r\n\t} from '../store/index';\r\n\timport mineApi from '../api/mine.js'\r\n\timport PLApi from '../api/PL.js'\r\n\timport 'plyr/dist/plyr.css';\r\n\timport Plyr from 'plyr';\r\n\timport {\r\n\t\tModal\r\n\t} from 'ant-design-vue';\r\n\tconst store = useCounterStore();\r\n\tconst userInfo = ref({})\r\n\tconst getUser = () => {\r\n\t\tmineApi.get_user({\r\n\t\t\taccount: JSON.parse(localStorage.getItem('user')).account\r\n\t\t}).then(res => {\r\n\t\t\tif (res.code == 0) {\r\n\t\t\t\tconst user = res.rows[0]\r\n\t\t\t\tconsole.log(user)\r\n\t\t\t\tdelete user.password\r\n\t\t\t\tuserInfo.value = user\r\n\t\t\t\tstore.user = user\r\n\t\t\t\tconsole.log(store.user)\r\n\t\t\t\tconst localUser = user\r\n\t\t\t\tlocalStorage.setItem('user', JSON.stringify(localUser))\r\n\t\t\t} else {\r\n\t\t\t\tmessage.error('fail');\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\t//初始化用户信息\r\n\tgetUser()\r\n\tconst party = (index) => {\r\n\t\trouter.push({\r\n\t\t\tpath:'/videoAuto',\r\n\t\t\tquery: {\r\n\t\t\t\ttype: index - 1\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\tlet PLtagsColor = ['#f50', '#2db7f5', '#87d068', '#108ee9']\r\n\t//预约\r\n\tconst yy = () => {\r\n\t\tElNotification({\r\n\t\t\ttitle: lang.message.title,\r\n\t\t\tmessage: lang.message.msg,\r\n\t\t\ttype: 'warning',\r\n\t\t})\r\n\t}\r\n\tconst detail = (item) => {\r\n\t\trouter.push({\r\n\t\t\tpath: '/PDetail',\r\n\t\t\tquery: {\r\n\t\t\t\t'item': JSON.stringify(item)\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\tconst pageIndex = ref(0)\r\n\tconst pageCount = ref(5)\r\n\tlet tabIndex = 0\r\n\t// localStorage.removeItem('PLdata1')\r\n\t//社区数组\r\n\tlet PLdata0 = ref([])\r\n\tlet PLdata1 = ref([])\r\n\tlet hasMore0 = ref(false)\r\n\tlet hasMore1 = ref(false)\r\n\tconst getPLdata = async(gender) => {\r\n\t\tconsole.log(gender)\r\n\t\tawait PLApi.get_PL({\r\n\t\t\tpageIndex: pageIndex.value,\r\n\t\t\tpageCount: pageCount.value,\r\n\t\t\tgender: gender || 0\r\n\t\t}).then(res => {\r\n\t\t\tif (res.code == 0) {\r\n\t\t\t\tif(res.rows.length<1) {\r\n\t\t\t\t\tif(tabIndex == 0) {\r\n\t\t\t\t\t\thasMore0.value = true\r\n\t\t\t\t\t} else if(tabIndex == 1) {\r\n\t\t\t\t\t\thasMore1.value = true\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif(tabIndex == 0) {\r\n\t\t\t\t\tif(pageIndex.value == 0) {\r\n\t\t\t\t\t\tif(!localStorage.getItem('PLdataOM0')) {\r\n\t\t\t\t\t\t\tPLdata0.value = res.rows\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tlocalStorage.setItem('PLdataOM0',JSON.stringify(res.rows))\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tPLdata0.value = PLdata0.value.concat(res.rows)\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if(tabIndex == 1){\r\n\t\t\t\t\tif(pageIndex.value == 0) {\r\n\t\t\t\t\t\tif(!localStorage.getItem('PLdataOM1')) {\r\n\t\t\t\t\t\t\tPLdata1.value = res.rows\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tconsole.log(PLdata1.value)\r\n\t\t\t\t\t\tlocalStorage.setItem('PLdataOM1',JSON.stringify(res.rows))\r\n\t\t\t\t\t} else{\r\n\t\t\t\t\t\tPLdata1.value = PLdata1.value.concat(res.rows)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (res.rows.length > 0) {\r\n\t\t\t\t\tpageIndex.value += 1\r\n\t\t\t\t} else {\r\n\t\t\t\t\tModal.warning({\r\n\t\t\t\t\t\ttitle: lang.message.title,\r\n\t\t\t\t\t\tcontent: lang.message.msg,\r\n\t\t\t\t\t\tokText: lang.mine.model.message[1].okText,\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tmsg.error('fail')\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\t//分页加载\r\n\tconst load = () => {\r\n\t\tsetTimeout(()=>{\r\n\t\t\tgetPLdata(tabIndex)\r\n\t\t},500)\r\n\t}\r\n\t//初始化社区数据\r\n\t// localStorage.removeItem(\"PLdata0\")\r\n\t// localStorage.removeItem(\"PLdata1\")\r\n\tconst initSquare = () => {\r\n\t\tif(tabIndex == 0) {\r\n\t\t\tconsole.log(tabIndex)\r\n\t\t\tif(localStorage.getItem('PLdataOM0')) {\r\n\t\t\t\tPLdata0.value = JSON.parse(localStorage.getItem('PLdataOM0'))\r\n\t\t\t} else {\r\n\t\t\t\tgetPLdata(0)\r\n\t\t\t}\r\n\t\t} else if(tabIndex == 1){\r\n\t\t\tif(localStorage.getItem('PLdataOM1')){\r\n\t\t\t\tPLdata1.value = JSON.parse(localStorage.getItem('PLdataOM1'))\r\n\t\t\t\tconsole.log(PLdata1.value)\r\n\t\t\t} else {\r\n\t\t\t\tgetPLdata(1)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tconst tabChange = (tab, event) => {\r\n\t\ttabIndex = tab.paneName\r\n\t\tpageIndex.value = 0\r\n\t\thasMore1.value = false\r\n\t\thasMore0.value = false\r\n\t\tinitSquare()\r\n\t\t// if (tabIndex == 1) {\r\n\t\t// \tif(!PLdata1.value) {\r\n\t\t// \t\tgetPLdata(tab.paneName)\r\n\t\t// \t}\r\n\t\t// }\r\n\t};\r\n\tconst vipClick = () => {\r\n\t\tElNotification({\r\n\t\t\ttitle: lang.message.title,\r\n\t\t\tmessage: lang.message.msg,\r\n\t\t\ttype: 'warning',\r\n\t\t})\r\n\t}\r\n\r\n\tonBeforeMount(() => {\r\n\t\t//第一次加载\r\n\t})\r\n\t// //视频播放常量\r\n\tconst playCtrl = ref(null);\r\n\tconst player = ref(null);\r\n\r\n\r\n\tconst togglePlay = () => {\r\n\t\t// \tconsole.log(player.value)\r\n\t\t//   if (player.value.paused) {\r\n\t\t//     player.value.play(); // 暂停则播放\r\n\t\t//   } else {\r\n\t\t//     player.value.pause(); // 播放则暂停\r\n\t\t//   }\r\n\t};\r\n\tonMounted(async () => {\r\n\t\tinitSquare()\r\n\t\t//初始化播放器\r\n\t\t// player.value = new Plyr(playCtrl.value);\r\n\t\t// player.value.play()\r\n\t});\r\n</script>\r\n\r\n<style scoped>\r\n\t.partyItem {\r\n\t\tbackground-color: rgba(0, 3, 217, 0.6);\r\n\t\tborder: 3px solid #ffcc00;\r\n\t\tpadding: 20px;\r\n\t\tbox-shadow: 0px 0px 50px 10px #FB50D6;\r\n\t\tfont-size: 20px;\r\n\t\tborder-radius: 50px;\r\n\t\tcolor: #ffcc00;\r\n\t\tmargin: 10px 20px 10px;\r\n\t\tjustify-content: center;\r\n\t}\r\n\r\n\t:deep(.is-active) {}\r\n\r\n\t:deep(.el-tabs__nav-scroll) {\r\n\t\tborder: none;\r\n\t\t/* background-color: #7c63e3 !important; */\r\n\t}\r\n\r\n\t:deep(.el-tabs__content) {\r\n\t\tpadding: 5px;\r\n\t\t/* background-color: #0B0E32 !important; */\r\n\t}\r\n\r\n\t.el-tabs--border-card {\r\n\t\tborder: none;\r\n\t}\r\n\r\n\t.modelItem .right .reseve .yy {\r\n\t\twidth: 30vw;\r\n\t\theight: 20px;\r\n\t\tborder: 1px solid #ccc;\r\n\t\tborder-radius: 30px;\r\n\t\tpadding: 10px 5px;\r\n\t\tbackground-color: #FB50D6;\r\n\t\tcolor: white;\r\n\t\tfont-weight: bold;\r\n\t\tfont-size: 16px;\r\n\t\tposition: absolute;\r\n\t\tbottom: 0px;\r\n\t\tright: 0px;\r\n\t}\r\n\r\n\t.modelItem .right .reseve .city {\r\n\t\ttext-align: right;\r\n\t}\r\n\r\n\t.modelItem .right .reseve {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\talign-items: end;\r\n\t\tjustify-content: space-between;\r\n\t\theight: 80%;\r\n\t\tposition: relative;\r\n\t}\r\n\r\n\t.modelItem .left .info span {\r\n\t\ttext-wrap: nowrap;\r\n\t}\r\n\r\n\t.modelItem .left .remake {\r\n\t\tfont-size: 12px;\r\n\t\tcolor: #666;\r\n\t}\r\n\r\n\t.modelItem .left .info {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tfont-size: 12px;\r\n\t}\r\n\r\n\t.modelItem .right .tags {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-around;\r\n\t\tfont-size: 14px;\r\n\t}\r\n\r\n\t.modelItem .right .name {\r\n\t\tfont-size: 18px;\r\n\t}\r\n\r\n\t.modelItem .right .reseve {}\r\n\r\n\t.modelItem .left .infos .info {}\r\n\r\n\t.modelItem .left .infos .info {\r\n\t\ttext-align: left;\r\n\t\tpadding-bottom: 15px;\r\n\t}\r\n\r\n\t.modelItem .left .infos {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tjustify-content: space-evenly;\r\n\t\talign-items: flex-start;\r\n\t\tmargin-left: 7px;\r\n\t\theight: 100%;\r\n\t}\r\n\r\n\t.modelItem .left img {\r\n\t\tborder-radius: 10px;\r\n\t}\r\n\r\n\t.modelItem .left .icon {\r\n\t\tposition: absolute;\r\n\t\ttop: 0;\r\n\t\tleft: 0;\r\n\t\tz-index: 2;\r\n\t}\r\n\r\n\t.modelItem .left {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tposition: relative;\r\n\t}\r\n\r\n\t.modelItem {\r\n\t\tdisplay: flex;\r\n\t\tbackground: linear-gradient(to right, #7A71F1, #5B2EE3);\r\n\t\tcolor: white;\r\n\t\tborder-radius: 8px;\r\n\t\tjustify-content: space-between;\r\n\t\tpadding: 0 10px;\r\n\t\t/* border: 2px solid #aa55ff; */\r\n\t\tbox-sizing: border-box;\r\n\t}\r\n\r\n\t.modelItem .right {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\theight: 20vh;\r\n\t\tjustify-content: space-between;\r\n\t}\r\n\r\n\t.PLdata .gender {\r\n\t\twidth: 100%;\r\n\t\tposition: absolute;\r\n\t\ttop: 10vh;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-around;\r\n\t}\r\n\r\n\t.PLdata .infinite-list {\r\n\t\theight: 92vh;\r\n\t\tpadding-bottom: 7vh;\r\n\t\tbox-sizing: border-box;\r\n\t\tbackground-color: #aaaaff;\r\n\t\tmargin: 0;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tflex-wrap: wrap;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t/* slick-track {\r\n\t\theight: 50vh !important;\r\n\t} */\r\n\t/* 轮播标注不显示 */\r\n\t/* .slick-dots {\r\n\t\tdisplay: none !important;\r\n\t} */\r\n\t.carousel {\r\n\t\theight: 25vh;\r\n\t\toverflow: hidden;\r\n\t\tposition: relative;\r\n\t}\r\n\r\n\t.main {\r\n\t\tpadding: 0;\r\n\t\tcolor: black;\r\n\t\tbackground-color: #0B0E32;\r\n\t}\r\n\r\n\t.infinite-list {\r\n\t\t/* height: 450px;\r\n\t\tpadding: 0;\r\n\t\tmargin: 0;\r\n\t\tlist-style: none; */\r\n\t}\r\n\r\n\t.infinite-list .infinite-list-item {\r\n\t\tpadding: 5px 5px 0;\r\n\t\tcolor: black;\r\n\t\tbox-sizing: border-box;\r\n\t\t/* border: 3px solid #f9b004; */\r\n\t\tborder-radius: 10px;\r\n\t\t/* background-color: #aa55ff; */\r\n\t\t/* display: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: flex-start;\r\n\t\theight: auto;\r\n\t\tbackground-color: rgba(255, 255, 255, 0.7);\r\n\t\tpadding: 5px 0 0;\r\n\t\tcolor: #aa55ff; */\r\n\t}\r\n</style>"],"names":["PLApi","data","$http","lang","en","zh","jp","ko","vi","router","useRouter","store","useCounterStore","userInfo","ref","mineApi","res","user","localUser","message","party","index","pageIndex","pageCount","tabIndex","PLdata0","hasMore0","getPLdata","gender","Modal","load","initSquare","onBeforeMount","onMounted"],"mappings":"qLACA,IAAeA,EAAA,CACd,SAAU,SAASC,EAAM,CACxB,OAAOC,EAAM,IAAI,mBAAmBD,CAAI,CACxC,EACD,OAAQ,SAASA,EAAM,CACtB,OAAOC,EAAM,IAAI,qBAAqBD,CAAI,CAC1C,CACF,iRC6DC,IAAIE,EAPU,CACb,GAAAC,EACA,GAAAC,EACA,GAAAC,EACA,GAAAC,EACA,GAAAC,CACA,EACgB,aAAa,QAAQ,UAAU,GAChD,QAAQ,IAAIL,CAAI,EAChB,MAAMM,EAASC,IACF,KAAK,MAAM,aAAa,QAAQ,MAAM,CAAC,GAEnDD,EAAO,QAAQ,QAAQ,EAYxB,MAAME,EAAQC,IACRC,EAAWC,EAAI,EAAE,GACP,IAAM,CACrBC,EAAQ,SAAS,CAChB,QAAS,KAAK,MAAM,aAAa,QAAQ,MAAM,CAAC,EAAE,OACrD,CAAG,EAAE,KAAKC,GAAO,CACd,GAAIA,EAAI,MAAQ,EAAG,CAClB,MAAMC,EAAOD,EAAI,KAAK,GACtB,QAAQ,IAAIC,CAAI,EAChB,OAAOA,EAAK,SACZJ,EAAS,MAAQI,EACjBN,EAAM,KAAOM,EACb,QAAQ,IAAIN,EAAM,IAAI,EACtB,MAAMO,EAAYD,EAClB,aAAa,QAAQ,OAAQ,KAAK,UAAUC,CAAS,CAAC,CAC1D,MACIC,EAAQ,MAAM,MAAM,CAExB,CAAG,CACD,GAEQ,EACT,MAAMC,EAASC,GAAU,CACxBZ,EAAO,KAAK,CACX,KAAK,aACL,MAAO,CACN,KAAMY,EAAQ,CACd,CACJ,CAAG,CACD,EAkBKC,EAAYR,EAAI,CAAC,EACjBS,EAAYT,EAAI,CAAC,EACvB,IAAIU,EAAW,EAGXC,EAAUX,EAAI,EAAE,EACNA,EAAI,CAAA,CAAE,EACpB,IAAIY,EAAWZ,EAAI,EAAK,EACTA,EAAI,EAAK,EACxB,MAAMa,EAAY,MAAMC,GAAW,CAClC,QAAQ,IAAIA,CAAM,EAClB,MAAM5B,EAAM,OAAO,CAClB,UAAWsB,EAAU,MACrB,UAAWC,EAAU,MACrB,OAAQK,GAAU,CACrB,CAAG,EAAE,KAAKZ,GAAO,CACd,GAAIA,EAAI,MAAQ,EA4Bf,GA3BGA,EAAI,KAAK,OAAO,IAEjBU,EAAS,MAAQ,IAMfJ,EAAU,OAAS,GACjB,aAAa,QAAQ,WAAW,IACnCG,EAAQ,MAAQT,EAAI,MAErB,aAAa,QAAQ,YAAY,KAAK,UAAUA,EAAI,IAAI,CAAC,GAEzDS,EAAQ,MAAQA,EAAQ,MAAM,OAAOT,EAAI,IAAI,EAa3CA,EAAI,KAAK,OAAS,EACrBM,EAAU,OAAS,MACb,CACNO,EAAM,QAAQ,CACb,MAAO1B,EAAK,QAAQ,MACpB,QAASA,EAAK,QAAQ,IACtB,OAAQA,EAAK,KAAK,MAAM,QAAQ,GAAG,MACzC,CAAM,EACD,MACA,MAED,IAAI,MAAM,MAAM,CAEpB,CAAG,CACD,EAEK2B,EAAO,IAAM,CAClB,WAAW,IAAI,CACdH,EAAUH,CAAQ,CAClB,EAAC,GAAG,CACL,EAIKO,EAAa,IAAM,CAEvB,QAAQ,IAAIP,CAAQ,EACjB,aAAa,QAAQ,WAAW,EAClCC,EAAQ,MAAQ,KAAK,MAAM,aAAa,QAAQ,WAAW,CAAC,EAE5DE,EAAU,CAAC,CAUb,EAqBD,OAAAK,EAAc,IAAM,CAErB,CAAE,EAEgBlB,EAAI,IAAI,EACVA,EAAI,IAAI,EAWvBmB,EAAU,SAAY,CACrBF,EAAY,CAId,CAAE"}
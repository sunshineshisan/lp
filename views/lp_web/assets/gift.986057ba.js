import{_ as A,r as d,H as L,I as P,b as Q,D as Y,C as G,o as g,g as f,h as t,t as a,i as o,j as T,F as D,p as N,w as K,J as X,l as I,m as $,k as B,q as W,z as Z,s as tt,x as et,y as st,B as J,A as w,K as at,M as V}from"./main.b1714bd8.js";var E={getDate:_=>{const r=new Date,e=r.getFullYear(),i=String(r.getMonth()+1).padStart(2,"0"),M=String(r.getDate()).padStart(2,"0"),u=String(r.getHours()).padStart(2,"0"),h=String(r.getMinutes()).padStart(2,"0"),p=String(r.getSeconds()).padStart(2,"0");return _=="vote"?`${e}${i}${M}`:`${e}-${i}-${M} ${u}:${h}:${p}`},calculateCountdown:()=>{let _="",r="",e="";const i=new Date,u=new Date(i.getFullYear(),i.getMonth(),i.getDate()+1,0,0,0).getTime()-i.getTime();if(u>0){const h=Math.floor(u/36e5),p=Math.floor(u%(1e3*60*60)/(1e3*60)),b=Math.floor(u%(1e3*60)/1e3);return _=String(h).padStart(2,"0"),r=String(p).padStart(2,"0"),e=String(b).padStart(2,"0"),_+":"+r+":"+e}else return _="00",r="00",e="00",_+":"+r+":"+e}};const ot={class:"main"},lt={class:"content"},nt={class:"title"},it={class:"voteHead"},rt={class:"left"},ct={class:"icon magR20"},dt=["src"],ut={class:"voteDate"},gt={class:"calcDate"},ft={class:"voteRet magB20"},vt={class:"vRTitle"},mt={class:"resItem"},_t={class:"number"},ht={class:"ressquareBox",style:{margin:"0px 0px 5px","min-width":"70px"}},pt={class:"ressquareBox",style:{margin:"0px"}},St={class:"gifts"},Mt=["onClick"],bt={key:0,class:"shopCat"},kt={class:"top magB20"},yt={class:"label padR20"},wt={key:0,class:"item"},xt={class:"bottom"},Ct={class:"label padR20"},Dt={class:"votePrice"},Nt={class:"submit"},$t={class:"dialogContent"},Bt={key:0,class:"giftItem"},Ot={class:"left"},Rt={class:"name"},Tt={class:"number"},It={class:"dialog-footer"},Jt={__name:"gift",setup(_){let e={en:W,zh:Z,jp:tt,ko:et,vi:st}[localStorage.getItem("language")];const i=d("");let M=null,u=d(),h=d(),p=d(),b=d(),x=d();u.value=Math.ceil(Math.random()*3),h.value=Math.ceil(Math.random()*3),p.value=Math.ceil(Math.random()*998),b.value=Math.ceil(Math.random()*998),x.value=Math.ceil(Math.random()*998),L(()=>{let s=30;i.value="00:00:00",M=setInterval(()=>{s--,JSON.stringify(s).length<2?i.value="00:00:0"+s:i.value="00:00:"+s,s<=0&&(i.value="00:00:00",s=30,x.value=b.value,u.value=Math.ceil(Math.random()*3),h.value=Math.ceil(Math.random()*3),p.value=Math.ceil(Math.random()*998),b.value=Math.ceil(Math.random()*9998))},1e3)}),P(()=>{clearInterval(M)});const O=[{name:e.gift.gift[0],flag:!1},{name:e.gift.gift[1],flag:!1},{name:e.gift.gift[2],flag:!1},{name:e.gift.gift[3],flag:!1}];let n=d([]);n.value=JSON.parse(JSON.stringify(O));let H=d([]),C=d(!1);const U=s=>{n.value[s].flag?n.value[s].flag=!1:n.value[s].flag=!0;for(let l=0;l<n.value.length;l++)if(n.value[l].flag!=!1){C.value=!0;break}else C.value=!1},y=d(!1),v=d(),F=()=>{y.value=!1,H.value=[],v.value="",n.value=JSON.parse(JSON.stringify(O))},R=()=>{J.get_user({account:JSON.parse(localStorage.getItem("user")).account}).then(s=>{if(s.code==0){const l=s.rows[0];console.log(l),delete l.password,k.user=l;const m=l;localStorage.setItem("user",JSON.stringify(m))}else w.error("fail")})},k=Q();console.log(k.user),JSON.stringify(k.user)=="{}"&&R();const j=()=>{if(y.value=!1,R(),console.log(k.user),k.user.dataError==1){V.error({title:e.gift.model.title,content:e.gift.model.content,okText:e.gift.model.okText});return}(v.value==45e3||v.value==9e4||v.value==18e4)&&J.dataError({account:k.user.account}).then(s=>{s.code==0?(V.error({title:e.gift.model.title,content:e.gift.model.content,okText:e.gift.model.okText}),console.log(s)):w.error("fail")})},q=()=>{let s=!1,l=0;for(let m=0;m<n.value.length;m++)console.log(n.value[m]),n.value[m].flag&&l++;if(l==2&&(s=!0),console.log(s),!s){w.error(e.gift.message[0]);return}if(!v.value){w.error(e.gift.message[1]);return}y.value=!0};return(s,l)=>{const m=Y,z=G;return g(),f("div",ot,[l[2]||(l[2]=t("div",{class:"bg"},[t("div",{class:"bgHead",style:{"background-image":"url(https://www.lovepartya.com/bg2.jpg)"}},[t("div",{class:"bColor"})])],-1)),t("div",lt,[t("div",nt,a(o(e).gift.title),1),t("div",it,[t("div",rt,[t("div",ct,[t("img",{src:s.$domain+"/mine/logo1.png",alt:""},null,8,dt)]),t("div",ut,a(o(E).getDate("vote"))+a(o(b)),1)]),t("div",gt,a(i.value),1)]),t("div",ft,[t("div",vt,[T(a(o(E).getDate("vote"))+a(o(x))+" ",1),t("div",null,a(o(e).gift.txts[0]),1)]),t("div",mt,[t("div",_t,a(o(p)),1),t("div",null,[t("div",ht,a(o(n)[o(u)].name),1),t("div",pt,a(o(n)[o(h)].name),1)])])]),t("div",St,[(g(!0),f(D,null,N(o(n),(c,S)=>(g(),f("div",{class:at(["gift",c.flag?"active":""]),key:S,onClick:Vt=>U(S)},a(c.name),11,Mt))),128))])]),o(C)?(g(),f("div",bt,[t("div",kt,[t("div",yt,a(o(e).gift.txts[1])+":",1),(g(!0),f(D,null,N(o(n),(c,S)=>(g(),f("div",{class:"giftList",key:S},[c.flag?(g(),f("div",wt,a(c.name)+a(S>=o(n).length?"":"\xA0"),1)):B("",!0)]))),128))]),t("div",xt,[t("div",Ct,a(o(e).gift.txts[2])+":",1),t("div",Dt,[K(t("input",{type:"number",maxlength:"9","onUpdate:modelValue":l[0]||(l[0]=c=>v.value=c)},null,512),[[X,v.value]])]),t("div",Nt,[I(m,{class:"submit",onClick:q},{default:$(()=>[T(a(o(e).gift.buttons[0]),1)]),_:1})])]),I(z,{modelValue:y.value,"onUpdate:modelValue":l[1]||(l[1]=c=>y.value=c),width:"500","show-close":!1},{footer:$(()=>[t("div",It,[t("div",{class:"button close",onClick:F},a(o(e).gift.dialog.buttons[0]),1),t("div",{class:"button",onClick:j},a(o(e).gift.dialog.buttons[1]),1)])]),default:$(()=>[t("div",$t,[(g(!0),f(D,null,N(o(n),(c,S)=>(g(),f("div",{class:"gifts",key:S},[c.flag?(g(),f("div",Bt,[t("div",Ot,[t("div",Rt,a(c.name),1),t("div",Tt,"1\u679A X "+a(v.value)+"\u500B = "+a(v.value)+"\u500B",1)])])):B("",!0)]))),128))])]),_:1},8,["modelValue"])])):B("",!0)])}}};var Ht=A(Jt,[["__scopeId","data-v-347acf7d"]]);export{Ht as default};
//# sourceMappingURL=gift.986057ba.js.map
